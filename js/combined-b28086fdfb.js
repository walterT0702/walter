function addPic(){for(var t=[{fileName:"07.png",title:"大同—云冈石窟"},{fileName:"08.png",title:"大同—云冈石窟博物馆"},{fileName:"09.png",title:"晋中—常家庄园"},{fileName:"10.png",title:"K11"},{fileName:"11.png",title:"上海—保利大剧院"},{fileName:"12.png",title:"K11"},{fileName:"13.png",title:"南昌—江西科技馆"},{fileName:"14.png",title:"上海—都市实践区"},{fileName:"15.png",title:"上海—嘉定艺术家工作室"},{fileName:"16.png",title:"三亚—蜈支洲岛"},{fileName:"17.png",title:"上海—青浦夏雨幼儿园"},{fileName:"18.png",title:"上海—青浦居民区"},{fileName:"19.png",title:"上海—青浦图书馆"},{fileName:"20.png",title:"三亚—蜈支洲岛"},{fileName:"21.png",title:"上海—胜利街区居委会"},{fileName:"22.png",title:"上海—尚都里"},{fileName:"23.png",title:"上海—同济C楼"},{fileName:"24.png",title:"苏州—车道"}],a=0;a<t.length;a++)!function(a){var i=$("<li>").addClass("tourism-box").appendTo($(".tourism-container")),e=$("<div>").addClass("tourism-pic").appendTo(i);$("<img>").addClass("pic").attr("src","img/tourism/small/"+t[a].fileName).attr("data-src","img/tourism/big/"+t[a].fileName).appendTo(e),$("<h4>").html(t[a].title).appendTo(e)}(a)}function checkscrollside(){var t=$(".tourism-container > li"),a=t.last().get(0).offsetTop+Math.floor(t.last().height()/2),i=$(window).scrollTop(),e=$(document).width();return a<i+e}function waterfall(){var t=$(".tourism-container > li"),a=$(".tourism-container"),i=t.eq(0).outerWidth(),e=Math.floor(a.width()/i);a.width(i*e).css("margin","0 auto");var o=[];t.each(function(a,n){var s=t.eq(a).outerHeight();if(a<e)o[a]=s;else{var c=Math.min.apply(null,o),r=$.inArray(c,o);$(n).css({position:"absolute",top:c+"px",left:r*i+"px"}),o[r]+=t.eq(a).outerHeight()}});var n=Math.max.apply({},o)+10;a.css("height",n)}function DomRender(){"use strict";var t=$("<div>").attr("id","magnify_mask").addClass("magnify-mask").insertBefore($("#back_to_index")),a=($("<div>").attr("id","magnify_wrap").addClass("magnify-wrap").appendTo(t),$("<div>").attr("id","magnify_change_img").addClass("magnify-change-img").appendTo(t));$("<div>").attr("id","magnify_change_img_pre").appendTo(a),$("<div>").attr("id","magnify_change_img_next").appendTo(a)}function DomRemove(){$("div").remove(".magnify-mask")}function MagnifyImg(){$(".tourism-container").on("click",".tourism-pic",function(t){DomRender();var a=$("#magnify_mask"),i=$("#magnify_wrap"),e=$(this).find(".pic").attr("data-src"),o=$("<img>").attr("src",e).attr("alt","").appendTo(i),n=$(this).find("img");!function(){n.width()-n.height()>=0?o.css("height","auto").css("width","100%"):o.css("width","auto").css("height","100%")}(),a.fadeIn(600),$("body").css("overflow","hidden"),$("#magnify_wrap").on("click",function(t){DomRemove(),$("body").css("overflow","auto")});var s=$("#magnify_change_img");s.on("click","div",function(){var t=Number(e.substring(16,18));"magnify_change_img_pre"===$(this).attr("id")?t>1&&t<=10?dataSrcFileName="0"+(t-1):t>1&&t<=24?dataSrcFileName=t-1:(t=1)&&(dataSrcFileName=dataSrcFileName):t<9?dataSrcFileName="0"+(t+1):t<24&&(dataSrcFileName=t+1);var a="img/tourism/big/"+dataSrcFileName+".png";i.empty();var o=$("<img>").attr("src",a).attr("alt","").appendTo(i);e=a;var n=$(".tourism-container li").find('[data-src="'+a+'"]');!function(){n.width()-n.height()>=0?o.css("height","auto").css("width","100%"):o.css("width","auto").css("height","100%")}()})})}function Init(){MagnifyImg()}!function(){"use strict";function t(){a()}function a(){i.menu.click(function(){"none"===i.mask.css("display")&&(i.wrap.css("left","-220px"),i.mask.fadeIn(100),i.body.css("overflow","hidden"))}),i.mask.click(function(){"none"==i.mask.css("display")?i.wrap.css("left","-220px"):(i.wrap.css("left","0"),i.mask.fadeOut(100),i.body.css("overflow","auto"),i.portfolioDetails.fadeOut(100))}),i.portfolioMore.click(function(){"none"==i.portfolioDetails.css("display")?(i.portfolioDetails.fadeIn(300),i.portfolioMore.css("transform","rotate(90deg)")):(i.portfolioDetails.fadeOut(300),i.portfolioMore.css("transform","rotate(0)"))}),i.sideBarDiv.on("click","a",function(){i.wrap.css("left","0"),$(this).removeClass("active"),$(this).addClass("active"),i.mask.fadeOut(100),i.body.css("overflow","auto")}),$("#portfolio_details li").removeClass("active"),i.sideBar.on("click",".about-me a",function(){i.mask.fadeIn(100),i.aboutMe.fadeIn(100),i.body.css("overflow","hidden")}),i.aboutMe.on("click","button",function(){i.mask.fadeOut(100),i.aboutMe.fadeOut(100),i.body.css("overflow","auto")}),i.behind.parent().on("click",function(){$(this).css("transform","rotateY(0deg)")}),i.wechat.mouseover(function(){i.wechatCode.fadeIn(300)}),i.wechat.mouseout(function(){i.wechatCode.fadeOut(300)}),i.wechat.click(function(){"block"===i.wechatCode.css("display")?i.wechatCode.fadeOut(300):i.wechatCode.fadeIn(300)})}var i={body:$("#body"),menu:$("#menu"),mask:$("#mask"),wrap:$("#wrap"),sideBar:$("#side_bar"),sideBarDiv:$("#side_bar > div"),aboutMe:$("section #about_me"),portfolioDetails:$("#portfolio_details"),portfolioMore:$("#portfolio_more"),behind:$(".behind"),wechat:$("#wechat >a"),wechatCode:$("#wechat_code")};t()}(),$(window).on("load",function(){"use strict";waterfall(),window.onscroll=function(){checkscrollside()&&(addPic(),waterfall())}}),Init();